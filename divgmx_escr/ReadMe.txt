Видеокарта для ZX на основе DivGMX.
(модифицированная прошивка Basic build 20170508, автор MVV, https://github.com/mvvproject/DivGMX).
Только для чипа ep4ce10.

Обсуждение:
https://zx-pk.ru/threads/36436-videokarta-dlya-zx-na-osnove-divgmx.html

Выход hdmi, 640*480*60Гц = экран 256*192 с удвоением пикселей и бордюр.
Выдаёт слои графики:
256*192*4b - стандартный экран ZX.
256*192*4b - линейный, цвет на точку, 16 цветов из палитры 256. Два пикселя в байте. Есть один прозрачный цвет.
- слой спрайтов (пока нет).
- есть аппаратная прокрутка дополнительного экрана по вертикали и горизонтали.
- видеопамять включается в область ПЗУ 0000-3fff.

Подмена ПЗУ не работает на ZS Scorpion GMX, значит и картинки не будет.
На ZX Evolution не виден стандартный второй экран (RAM 7).

Порты управления, для чтения и записи (после сброса все = 0):
Port 00 (sys)
	0-3b - Video mode 
		0000 - standart 256*192*4b
		0001 - 256*192*4b (16c per pixel, from palette)
	4b - RAM page on 0000-3fff (0 = disable, 1 = enable)
	5b - type RAM page on 0000-3fff (0 - vram, 1 - sdram)

Port 01 (page sdram)
	0-255 - Page number on 0000-3fff (when bit 4 = 1 and bit 5 = 1 of port 00)

Port 02 (page vram)
	0-2 - Page number on 0000-3fff (when bit 4 = 1 and bit 5 = 0 of port 00)

Port 03 (horizontal scroll) - аппаратная прокрутка экрана
	0-255

Port 04 (vertical scroll) - аппаратная прокрутка экрана
	0-191

Port 05 (transparent color) - номер прозрачного цвета. По умолчанию 0.
	0-255

Port 10 - 1f (palette)
	16 color, 8b, RRRGGGBB 


Формат картинки DivGMX, mode 1:
256*192 точки, 16 цветов из палитры 256. 
Линейный сверху вниз, в одном байте два пикселя.
В строке 128 байт, дальше сразу же следующая строка.
Левый пиксель 7-4 биты (число от 0 до 15), правый 3-0 биты.
Файл 24576 байт + 16 байт палитры в конце = 24592 байт.
Байт палитры 7-0 биты RRRGGGBB (RGB332).
При отображении 0bit синего цвета Blue обрабатывается как на ZX Next (2bit OR 1bit).

Релиз для прошивки тут:
\divgmx_escr\syn\output_files\divgmx_ep4_basic20170429.jic

Сборка прошивки в Quartus II version 13.0.1 Build 232.
Открыть файл Open Project - файл syn\divgmx_ep4ce10e22c8n.qpf
Запустить Start Compilation.
После компиляции File - Convert Programming Files - взять файл
syn\output_files\ep4.cof
Нажать Generate.
Готовый файл .jic можно прошивать
Tools - Programmer.
Он прошьёт флешку, а не FPGA.

Планы:
Возможность отключения прозрачности цвета 0
Использование 4 Мб памяти SDRAM в окне 0000-3fff.
Слой спрайтов
Палитра 256 цветов
Палитра 16 миллионов цветов (под вопросом, нужна ли?)
Возможность смены порядка слоёв
+ Прокрутка с точностью до пикселя по горизонту
DMA (?)
Прерывания в начале экрана, в начале строки (?)
Синхронизация с int компьютера (?)
Частота кадров 50 Гц (?).



